local Day21 = {}

-- Each key maps to a table of destinations and their shortest path
-- use keypad["1"]["2"] to get the shortest path from 1 to 2
local function press(from, to)
    local keypad = {
        ["1"] = {
            ["2"] = ">",
            ["3"] = ">>",
            ["4"] = "^",
            ["5"] = "^>",
            ["6"] = "^>>",
            ["7"] = "^^",
            ["8"] = "^^>",
            ["9"] = "^^>>",
            ["0"] = "v>",
            ["A"] = "v>>"
        },
        ["2"] = {
            ["1"] = "<",
            ["3"] = ">",
            ["4"] = "^<",
            ["5"] = "^",
            ["6"] = "^>",
            ["7"] = "^^<",
            ["8"] = "^^",
            ["9"] = "^^>",
            ["0"] = "v",
            ["A"] = "v>"
        },
        ["3"] = {
            ["1"] = "<<",
            ["2"] = "<",
            ["4"] = "^<<",
            ["5"] = "^<",
            ["6"] = "^",
            ["7"] = "^^<<",
            ["8"] = "^^<",
            ["9"] = "^^",
            ["0"] = "v<",
            ["A"] = "v"
        },
        ["4"] = {
            ["1"] = "v",
            ["2"] = "v>",
            ["3"] = "v>>",
            ["5"] = ">",
            ["6"] = ">>",
            ["7"] = "^",
            ["8"] = "^>",
            ["9"] = "^>>",
            ["0"] = "vv>",
            ["A"] = "vv>>"
        },
        ["5"] = {
            ["1"] = "v<",
            ["2"] = "v",
            ["3"] = "v>",
            ["4"] = "<",
            ["6"] = ">",
            ["7"] = "^<",
            ["8"] = "^",
            ["9"] = "^>",
            ["0"] = "vv",
            ["A"] = "vv>"
        },
        ["6"] = {
            ["1"] = "v<<",
            ["2"] = "v<",
            ["3"] = "v",
            ["4"] = "<<",
            ["5"] = "<",
            ["7"] = "^<<",
            ["8"] = "^<",
            ["9"] = "^",
            ["0"] = "vv<",
            ["A"] = "vv"
        },
        ["7"] = {
            ["1"] = "vv",
            ["2"] = "vv>",
            ["3"] = "vv>>",
            ["4"] = "v",
            ["5"] = "v>",
            ["6"] = "v>>",
            ["8"] = ">",
            ["9"] = ">>",
            ["0"] = "vvv>",
            ["A"] = "vvv>>"
        },
        ["8"] = {
            ["1"] = "vv<",
            ["2"] = "vv",
            ["3"] = "vv>",
            ["4"] = "v<",
            ["5"] = "v",
            ["6"] = "v>",
            ["7"] = "<",
            ["9"] = ">",
            ["0"] = "vvv",
            ["A"] = "vvv>"
        },
        ["9"] = {
            ["1"] = "vv<<",
            ["2"] = "vv<",
            ["3"] = "vv",
            ["4"] = "v<<",
            ["5"] = "v<",
            ["6"] = "v",
            ["7"] = "<<",
            ["8"] = "<",
            ["0"] = "vvv<",
            ["A"] = "vvv"
        },
        ["0"] = {
            ["1"] = "^<",
            ["2"] = "^",
            ["3"] = "^>",
            ["4"] = "^^<",
            ["5"] = "^^",
            ["6"] = "^^>",
            ["7"] = "^^^<",
            ["8"] = "^^^",
            ["9"] = "^^^>",
            ["A"] = ">"
        },
        ["A"] = {
            ["1"] = "^<<",
            ["2"] = "^<",
            ["3"] = "^",
            ["4"] = "^^<<",
            ["5"] = "^^<",
            ["6"] = "^^",
            ["7"] = "^^^<<",
            ["8"] = "^^^<",
            ["9"] = "^^^",
            ["0"] = "<"
        }
    }

    return keypad[from][to] .. 'A'
end

function Day21.part1(numbers)
    for _, number in ipairs(numbers) do
        print(number)
        local current = 'A'
        for i = 1, #number do
            local to = string.sub(number, i, i)
            print(press(current, to))
            current = to
        end
    end
    return 0
end

return Day21
